# 内置接口

点击左侧工具栏的`内置接口`按钮可以打开内置接口管理栏，点击`添加`按钮即可添加一个内置接口。

<img src='./images/embed-api.png' height='600'>


内置接口需要指定一个名称和一段`javascript`代码，可以添加参数和测试样例代码，配置好的内置接口在[接口请求模块](../advance-topic/request.md)中可以使用。

## 内置接口列表

添加后的内置接口会显示字列表中，点击一项会打开该项的详细设置页面，每一项的又上交可能会有一个黄色的小三角图标，如果有，说明该项已经被使用了，如果小三角图标时半透明的，则说明该项虽然被使用，但是它的使用者没有被问卷真正使用。


## 设置项

### 接口名
该接口的名称，在`接口请求模块`中可以根据名字来选择想要使用的内置接口。

### 接口代码
编写任意`javascript`代码
接口代码最后必须返回一个函数作为接口处理函数，该函数的返回值必须是[接口请求](../advance-topic/request.md)里面提到的返回数据接口,即一个包含result和message属性的对象


### 参数
可以指定参数，指定参数后，在接口请求模块中使用该内置接口后，必须为所有参数提供值，接口代码中可以从接口处理函数的第一个参数中用取属性的方式访问到真实的参数，如上图中所的参数`p`和参数`q`一样，这个规则和接口请求中的`FAKE请求方式`的参数访问规则相同。


### 测试代码
为了确保编写的代码没有错误，或者在后续的更改中不会被改错，可以添加几个测试样例，测试样例代码中需要返回一个数组，数组的每一项是一个测试用例，当然也可以不指定测试样例。
```javascript

    return [
        { // 这是一个测试样例，可以添加多个样例
            params: { // 这个属性指定每个参数的值
                p: 1,
                q: 2,
            },
            result: 100,  // 这个属性指定正确的运行接口
        }
    ]
```
系统江湖自定运行测试，当用指定的参数去调用接口代码的到的结果不是指定的结果，则会报错。

