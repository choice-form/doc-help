```index
2
```
```tag

```
```summary

```
# 收集器

通过以下方式可以进入到收集器页面。

+ 点击[问卷列表](../dashboard/survey-list.md)中某个问卷卡片上的`收集`按钮。
+ 点击问卷编辑器[快速发布](../design/advance-topic/quick-publish.md)弹框中的`高级设置`按钮
+ 点击问卷编辑器左上角的logo，在选择`返回到设置`按钮。

最初进入到收集器页面时，系统会创建一个默认收集器。点击`新增收集器`可以为问卷添加更多收集器，多个收集器以Tab按钮的方式排列在面板顶部，点击收集器按钮切换显示属性页面。

收集器有以下属性：
+ 收集器
  + 收集器名称：点击名称右边的🔧按钮可以修改名称。
  + 收集器开启开关：点击切换收集器的开启/关闭状态。开启后，问卷成不可编辑状态，并生成正式的问卷链接，正式问卷链接可以进行数据收集。
  + 收集信息概要：显示当前收集数量，和占总发布数量的比例。
  
+ 回复数量限制：
  + 回复数量限制：设置问卷收集数据的数量，当问卷收集到的指定数量的数据后，收集器会自动关闭。
  + 不限制恢复数量：开启后会一直收集问卷回复数据，直到手动关闭收集器。
  + 新增配额：使用指定[配额设置](./quota.md)，使用后，`回复数量限制`自动会变成[配额设置](./quota.md)里的设定数量，且不可更改。

+ 日期与时间限制：
  + 不限制日期和时间：一直接收回复时间，直到手动关闭该收集器。
  + 截止日期和时间：设置问卷截止日期，到达预设日期后收集器会自动关闭。
  
+ 多次回复：用于控制在同一台设备上是否允许对同一份问卷进行多次回复。如果问卷包含了奖励，则锁定为同一设备上只允许回复一次，即不允许多次回复。
  + 限制在相同设备上多次回复调查问卷：同一个设备终端上，同一个被访者只能回复一次。
  + 允许在相同设备上多次回复调查问卷：同一个设备终端上，同一个被访者能多次回复问卷。
  
+ 收集器限制：
  + 限制在当前收集器上多次回复调查问卷：通过此收集器链接，同一个被访者只能回复一次。
  + 限制在所有收集器上多次回复调查问卷：如果问卷有多个收集器，并且被访者通过当前收集器回复了问卷，则不允许该被访者在此问卷的其他收集器再次进行回复。
  
+ 渠道设置：用于控制发布后的链接可以投放到那些渠道上。默认开启全部渠道。关闭某些渠道后，从这些渠道访问这个收集器的答题页面地址，会别拒绝答题。对于微信渠道，可选择是否需要`授权微信公众号`。选择授权后可以收集受访者的微信ID信息。

+ WEBHOOKS：填写一个网络地址，用于设置当指定事件发生时，发送消息到指定接口。目前，系统支持在`回复完成时`，`回复不合格时`，`恢复超过了设定的配额时`这三种情况下发送消息

  填写的网络地址可以有以下几种方式：
  + 直接http或https开头的网址如：`https://www.choiceform.com`，则发生情况后会直接跳转到该网址页面。
  + 以`GET:`开头在加上网址如：`GET:https://api.choiceform.com/test?number=1&name=lqq`，则发生情况后会在前端以`GET`方式调用这个接口,后面可以附加参数，请求参数将会拼接到url的后面。
  + 以`POST:`开头在加上网址如：`POST:https://api.choiceform.com/test?number=1&name=lqq`，则发生情况后会在前端以`GET`方式调用这个接口，请求时参数会放到HttpRequest的body中。。
  + 以`BACKEND:`开头在加上网址如：`BACKEND:https://api.choiceform.com/test?number=1&name=lqq`，则发生情况后会在后台调用这个接口，后台调用默认以POST方式调用。

  网络地址中还可以通过`{{varName}}`的方式注入问卷编辑器中的[变量](../design/variable/concept.md)，而且只能注入[显式变量](../design/variable/concept.md)和[URL参数变量](../design/variable/build-in.md)这两种。

  例如：
  
  问卷链接中带入了员工姓名参数，问卷内容中要求输入员工工号，在Webhook里，希望能把员工工号和姓名传出去。
  假设员工姓名叫`lucy`，通过问卷链接最后添加`key1`参数的形式注入，参考形式为：`[问卷链接]?key1="lucy"`，Webhook的目标地址为：`https://www.choiceform.com`。
  
  这时，需要注入2个变量：`var1`和`key1`：
  + `var1`：是一个`显式变量`，显式变量注入时需要确保在问卷编辑器中已经创建了一个名叫`var1`的变量，这里可以对应到问卷里面一道提示输入员工工号的题目；
  + `key1`：然后，`key1`是问卷编辑器中内置的`URL参数变量`，被访者打开问卷页面时，会解析出这些变量的值。

  根据以上各项，最终的Webhook地址应为：`https://www.choiceform.com?number={{var1}}&name={{key1}}`。被访者 `lucy`回复问卷时，`key1`解析到的值是`lucy`，如果她输入了员工工号`000`，那么`var1`解析到的值是`0001`。最后跳转的真实地址会是：`https://www.choiceform.com?number=0001&name=lucy`。

 由于Webhook有`回复完成时`，`回复不合格时`，`恢复超过了设定的配额时`3种不同触发点，将真实地址填入触发点，那么当发生该种事件时，就会调用地址并传出参数。
  



